{
  "project": "Lolo Recruiting System",
  "module": "Job Posts Management",
  "description": "Manages job openings with full CRUD, linking to projects and applications.",
  "folders": {
    "app/Models": ["Job.php"],
    "app/Http/Controllers": ["JobController.php"],
    "database/migrations": ["create_jobs_table.php"],
    "resources/views/jobs": ["index.blade.php", "create.blade.php", "show.blade.php", "edit.blade.php"]
  },

  "models": {
    "Job": {
      "fields": {
        "title": "string",
        "department": "string",
        "project_id": "foreignId:projects",
        "location": "string",
        "description": "text",
        "requirements": "text",
        "skills": "text",
        "employment_type": "enum:['full_time','part_time','contract','internship']",
        "salary_range": "string",
        "deadline": "date",
        "status": "enum:['open','closed','draft']",
        "created_by": "foreignId:users"
      },
      "relations": {
        "project": "belongsTo(Project::class)",
        "creator": "belongsTo(User::class,'created_by')",
        "applications": "hasMany(Application::class)"
      }
    }
  },

  "migrations": {
    "create_jobs_table.php": [
      "id",
      "string('title')",
      "string('department')->nullable()",
      "foreignId('project_id')->nullable()->constrained()->onDelete('set null')",
      "string('location')->nullable()",
      "text('description')->nullable()",
      "text('requirements')->nullable()",
      "text('skills')->nullable()",
      "enum('employment_type',['full_time','part_time','contract','internship'])->default('full_time')",
      "string('salary_range')->nullable()",
      "date('deadline')->nullable()",
      "enum('status',['open','closed','draft'])->default('open')",
      "foreignId('created_by')->constrained('users')->onDelete('set null')",
      "timestamps()"
    ]
  },

  "controllers": {
    "JobController": {
      "index": [
        "$jobs = Job::with(['project','creator'])->latest()->paginate(15);",
        "return view('jobs.index', compact('jobs'));"
      ],
      "create": [
        "$projects = Project::pluck('title','id');",
        "return view('jobs.create', compact('projects'));"
      ],
      "store": [
        "$validated = $request->validate([",
        "  'title' => 'required|string|max:255',",
        "  'department' => 'nullable|string',",
        "  'project_id' => 'nullable|exists:projects,id',",
        "  'location' => 'nullable|string',",
        "  'description' => 'nullable|string',",
        "  'requirements' => 'nullable|string',",
        "  'skills' => 'nullable|string',",
        "  'employment_type' => 'required|string',",
        "  'salary_range' => 'nullable|string',",
        "  'deadline' => 'nullable|date',",
        "  'status' => 'required|string',",
        "]);",
        "$validated['created_by'] = auth()->id();",
        "Job::create($validated);",
        "return redirect()->route('jobs.index')->with('success','Job created successfully.');"
      ],
      "show": [
        "$job = Job::with(['project','creator'])->findOrFail($id);",
        "return view('jobs.show', compact('job'));"
      ],
      "edit": [
        "$job = Job::findOrFail($id);",
        "$projects = Project::pluck('title','id');",
        "return view('jobs.edit', compact('job','projects'));"
      ],
      "update": [
        "$job = Job::findOrFail($id);",
        "$validated = $request->validate([",
        "  'title' => 'required|string|max:255',",
        "  'department' => 'nullable|string',",
        "  'project_id' => 'nullable|exists:projects,id',",
        "  'location' => 'nullable|string',",
        "  'description' => 'nullable|string',",
        "  'requirements' => 'nullable|string',",
        "  'skills' => 'nullable|string',",
        "  'employment_type' => 'required|string',",
        "  'salary_range' => 'nullable|string',",
        "  'deadline' => 'nullable|date',",
        "  'status' => 'required|string',",
        "]);",
        "$job->update($validated);",
        "return redirect()->route('jobs.show',$job->id)->with('success','Job updated successfully.');"
      ],
      "destroy": [
        "$job = Job::findOrFail($id);",
        "$job->delete();",
        "return redirect()->route('jobs.index')->with('success','Job deleted successfully.');"
      ]
    }
  },

  "routes": {
    "middleware": ["web", "auth"],
    "definitions": [
      { "uri": "/jobs", "controller": "JobController@index" },
      { "uri": "/jobs/create", "controller": "JobController@create" },
      { "uri": "/jobs", "controller": "JobController@store", "methods": ["POST"] },
      { "uri": "/jobs/{id}", "controller": "JobController@show" },
      { "uri": "/jobs/{id}/edit", "controller": "JobController@edit" },
      { "uri": "/jobs/{id}", "controller": "JobController@update", "methods": ["PUT"] },
      { "uri": "/jobs/{id}", "controller": "JobController@destroy", "methods": ["DELETE"] }
    ]
  },

  "views": {
    "jobs/index.blade.php": "@extends('layouts.app') @section('title','Jobs') @section('content')<h1 class='text-2xl font-semibold mb-6'>Job Openings</h1><a href='{{ route('jobs.create') }}' class='bg-slate-800 text-white px-4 py-2 rounded mb-4 inline-block'>âž• New Job</a><table class='min-w-full border text-sm bg-white rounded-xl shadow'><thead class='bg-slate-100 text-gray-600'><tr><th class='px-3 py-2 text-left'>Title</th><th class='px-3 py-2'>Department</th><th class='px-3 py-2'>Status</th><th class='px-3 py-2'>Deadline</th><th class='px-3 py-2'>Actions</th></tr></thead><tbody>@foreach($jobs as $job)<tr class='border-b hover:bg-slate-50'><td class='px-3 py-2'>{{ $job->title }}</td><td class='px-3 py-2'>{{ $job->department }}</td><td class='px-3 py-2 capitalize'>{{ $job->status }}</td><td class='px-3 py-2'>{{ $job->deadline }}</td><td class='px-3 py-2'><a href='{{ route('jobs.show',$job->id) }}' class='text-blue-600 underline'>View</a> | <a href='{{ route('jobs.edit',$job->id) }}' class='text-amber-600 underline'>Edit</a></td></tr>@endforeach</tbody></table>{{ $jobs->links() }}@endsection",
    "jobs/create.blade.php": "@extends('layouts.app') @section('title','Create Job') @section('content')<h1 class='text-2xl font-semibold mb-6'>Create New Job</h1><form method='POST' action='{{ route('jobs.store') }}' class='bg-white p-6 rounded-xl shadow space-y-4'>@csrf<div><label class='font-medium'>Title</label><input type='text' name='title' required class='border rounded p-2 w-full'></div><div><label class='font-medium'>Department</label><input type='text' name='department' class='border rounded p-2 w-full'></div><div><label class='font-medium'>Project</label><select name='project_id' class='border rounded p-2 w-full'><option value=''>Select Project</option>@foreach($projects as $id=>$title)<option value='{{ $id }}'>{{ $title }}</option>@endforeach</select></div><div><label class='font-medium'>Location</label><input type='text' name='location' class='border rounded p-2 w-full'></div><div><label class='font-medium'>Description</label><textarea name='description' class='border rounded p-2 w-full' rows='4'></textarea></div><div><label class='font-medium'>Requirements</label><textarea name='requirements' class='border rounded p-2 w-full' rows='4'></textarea></div><div><label class='font-medium'>Skills</label><textarea name='skills' class='border rounded p-2 w-full' rows='3'></textarea></div><div><label class='font-medium'>Employment Type</label><select name='employment_type' class='border rounded p-2 w-full'><option value='full_time'>Full Time</option><option value='part_time'>Part Time</option><option value='contract'>Contract</option><option value='internship'>Internship</option></select></div><div class='grid grid-cols-2 gap-4'><div><label class='font-medium'>Salary Range</label><input type='text' name='salary_range' class='border rounded p-2 w-full'></div><div><label class='font-medium'>Deadline</label><input type='date' name='deadline' class='border rounded p-2 w-full'></div></div><div><label class='font-medium'>Status</label><select name='status' class='border rounded p-2 w-full'><option value='open'>Open</option><option value='draft'>Draft</option><option value='closed'>Closed</option></select></div><button class='bg-slate-800 text-white px-4 py-2 rounded'>Save</button></form>@endsection",
    "jobs/show.blade.php": "@extends('layouts.app') @section('title','Job Details') @section('content')<h1 class='text-2xl font-semibold mb-6'>{{ $job->title }}</h1><div class='bg-white p-6 rounded-xl shadow space-y-3'><p><strong>Department:</strong> {{ $job->department }}</p><p><strong>Project:</strong> {{ $job->project->title ?? '-' }}</p><p><strong>Location:</strong> {{ $job->location }}</p><p><strong>Description:</strong> {{ $job->description }}</p><p><strong>Requirements:</strong> {{ $job->requirements }}</p><p><strong>Skills:</strong> {{ $job->skills }}</p><p><strong>Employment Type:</strong> {{ ucfirst(str_replace('_',' ',$job->employment_type)) }}</p><p><strong>Salary:</strong> {{ $job->salary_range }}</p><p><strong>Deadline:</strong> {{ $job->deadline }}</p><p><strong>Status:</strong> <span class='capitalize'>{{ $job->status }}</span></p><p><strong>Created By:</strong> {{ $job->creator->name ?? '-' }}</p><a href='{{ route('jobs.edit',$job->id) }}' class='bg-slate-700 text-white px-3 py-2 rounded mt-4 inline-block'>Edit Job</a></div>@endsection",
    "jobs/edit.blade.php": "@extends('layouts.app') @section('title','Edit Job') @section('content')<h1 class='text-2xl font-semibold mb-6'>Edit Job</h1><form method='POST' action='{{ route('jobs.update',$job->id) }}' class='bg-white p-6 rounded-xl shadow space-y-4'>@csrf @method('PUT')<div><label class='font-medium'>Title</label><input type='text' name='title' value='{{ $job->title }}' required class='border rounded p-2 w-full'></div><div><label class='font-medium'>Department</label><input type='text' name='department' value='{{ $job->department }}' class='border rounded p-2 w-full'></div><div><label class='font-medium'>Project</label><select name='project_id' class='border rounded p-2 w-full'><option value=''>Select Project</option>@foreach($projects as $id=>$title)<option value='{{ $id }}' {{ $job->project_id==$id?'selected':'' }}>{{ $title }}</option>@endforeach</select></div><div><label class='font-medium'>Location</label><input type='text' name='location' value='{{ $job->location }}' class='border rounded p-2 w-full'></div><div><label class='font-medium'>Description</label><textarea name='description' class='border rounded p-2 w-full' rows='4'>{{ $job->description }}</textarea></div><div><label class='font-medium'>Requirements</label><textarea name='requirements' class='border rounded p-2 w-full' rows='4'>{{ $job->requirements }}</textarea></div><div><label class='font-medium'>Skills</label><textarea name='skills' class='border rounded p-2 w-full' rows='3'>{{ $job->skills }}</textarea></div><div class='grid grid-cols-2 gap-4'><div><label class='font-medium'>Salary Range</label><input type='text' name='salary_range' value='{{ $job->salary_range }}' class='border rounded p-2 w-full'></div><div><label class='font-medium'>Deadline</label><input type='date' name='deadline' value='{{ $job->deadline }}' class='border rounded p-2 w-full'></div></div><div><label class='font-medium'>Status</label><select name='status' class='border rounded p-2 w-full'><option value='open' {{ $job->status=='open'?'selected':'' }}>Open</option><option value='draft' {{ $job->status=='draft'?'selected':'' }}>Draft</option><option value='closed' {{ $job->status=='closed'?'selected':'' }}>Closed</option></select></div><button class='bg-slate-800 text-white px-4 py-2 rounded'>Update</button></form>@endsection"
  },

  "notes": [
    "Provides full CRUD for job postings.",
    "Integrates with Project and Application modules.",
    "Later we can expose public route /careers for candidates to apply."
  ]
}
